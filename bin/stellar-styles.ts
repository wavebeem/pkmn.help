import { execSync } from "child_process";
import { writeFileSync } from "fs";
const css = String.raw;

const steps = [
  hsl(0, 50, 60),
  hsl(30, 50, 60),
  hsl(60, 50, 60),
  hsl(120, 50, 60),
  hsl(200, 50, 60),
  hsl(300, 50, 60),
  hsl(300, 50, 60),
] as const;

const stepsDark = [
  hsl(0, 50, 40),
  hsl(30, 50, 40),
  hsl(60, 50, 40),
  hsl(120, 50, 40),
  hsl(200, 50, 40),
  hsl(300, 50, 40),
  hsl(300, 50, 40),
] as const;

function createCSS() {
  return css`
    /* Auto-generated by stellar styles */
    :root {
      --stellar-background-linear: ${createStellarGradientLinear()};
      --stellar-background-conic: ${createStellarGradientConic()};
      --stellar-background-dark: ${createStellarGradientDark()};
    }
  `;
}

function hsl(h: number, s: number, l: number) {
  return `hsl(${h} ${s}% ${l}%)`;
}

function createStellarGradientLinear() {
  return `linear-gradient(-225deg in oklch, ${steps.join(", ")})`;
}

function createStellarGradientDark() {
  return `linear-gradient(-225deg, ${stepsDark.join(", ")})`;
}

function createStellarGradientConic() {
  return `conic-gradient(${steps.join(", ")})`;
}

const filename = "src/style/stellar.css";
const content = createCSS();
console.log(content);
writeFileSync(filename, content, "utf-8");
execSync("npm run fix:format");
